<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">

	<!-- 로그인  -->
	<select id="selectMember" parameterType="Member" resultType="Member">
	select * from member
	where userId = #{ userId } and status='Y'
	
	
	</select>
	
	<select id="idSearch" parameterType="Member" resultType="string">
	select userId
	from member
	where userName = #{userName} and To_date(birth,'RR/MM/DD')=#{birth}  and email = #{email} and status='Y'
	
	</select>
	<select id="pwdSearch" parameterType="string" resultType="string">
	select userId
	from member
	where userId =#{userId} and status='Y'
	</select>

	<!-- 관리자 회원 리스트 받아올때 페이징에 사용 -->
	<select id="getListCount" resultType="_int">
		select count(*)
		from member
		where status = 'Y'
	</select>
	
	<!-- 관리자 회원 리스트 -->
	<select id="selectMList" resultType="Member">
		select *
		from member
		order by ENROLL_DATE desc
	</select>
	
	<!-- 관리자 회원 detail -->
  	<select id="selectMDetail" parameterType="string" resultType="Member">
  		select *
  		from member
  		where userId = #{ userId }
  	</select>
  	
  	<!-- 관리자용 회원 수정 -->
  	<update id="mUserUpdate" parameterType="Member">
  		update member
  		set userName = #{ userName },
  			memberType = #{ memberType},
  			status = #{ status },
  			address = #{ address},
  			phone = #{ phone },
  			email = #{ email},
  			modify_Date = sysdate
  		where userId = #{ userId }
  	</update>
  	
  	<select id="idCheck" parameterType="string" resultType="_int">
		select count(*)
		from member
		where userid = #{userId}
	</select>
	
	<insert id = "insertMember" parameterType="Member">
		insert into member
		values(#{userId}, #{userPwd}, #{userName}, #{birth}, #{nickName}, #{gender}, #{email}, #{phone}, #{address}, default,  default, sysdate, sysdate, default, null)
	</insert>
	
	<select id="nickCheck" parameterType="string" resultType="_int">
		select count(*)
		from member
		where nickname = #{nickName}
	</select>
  	
	<!-- 관리자 신고 승인 -->
	<update id="mDeMApply" parameterType="string">
		update member
		set dec = dec+1
		where userId = #{ userId }
	</update>

  	
  	
</mapper>
